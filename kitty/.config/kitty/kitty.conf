# =============================================================================
# KITTY CONFIGURATION - Beautiful & Functional with Transparency
# =============================================================================

include ./kitty-themes/00-Default.conf

# Font Configuration
font_family      JetBrains Mono Nerd Font
bold_font        JetBrains Mono Nerd Font Bold
italic_font      JetBrains Mono Nerd Font Italic
bold_italic_font JetBrains Mono Nerd Font Bold Italic
font_size 14.0
adjust_line_height 2
adjust_column_width 0

# Cursor
cursor_shape block
cursor_blink_interval 0.5
cursor_stop_blinking_after 15.0
cursor_beam_thickness 1.5
cursor_trail 1

# Scrollback
scrollback_lines 10000
scrollback_pager less --chop-long-lines --RAW-CONTROL-CHARS +INPUT_LINE_NUMBER
wheel_scroll_multiplier 5.0

# Mouse
mouse_hide_wait 3.0
url_color #7aa2f7
url_style curly
open_url_with default
copy_on_select no
click_interval 0.5

# Terminal bell
enable_audio_bell no
visual_bell_duration 0.0

# Window layout and transparency
remember_window_size no 
initial_window_width 1400
initial_window_height 900
window_padding_width 2
placement_strategy center
window_margin_width 0
single_window_margin_width -1
window_border_width 1pt
draw_minimal_borders yes
window_resize_step_cells 2
window_resize_step_lines 2
confirm_os_window_close 0

# Background transparency and blur
dynamic_background_opacity yes

# Tab bar - Powerline style with transparency
tab_bar_edge bottom
tab_bar_style powerline
tab_powerline_style slanted
tab_title_template "{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab} {index}:  {title.split()[0] if title.rstrip().endswith('bash') else title}"
active_tab_title_template none
tab_bar_margin_width 0.0
tab_bar_margin_height 5.0 0.0
tab_bar_min_tabs 2
tab_switch_strategy previous
tab_fade 0.25 0.5 0.75 1

# Tokyo Night Color Scheme with enhanced contrast
foreground #c0caf5
background #1a1b26
selection_foreground #c0caf5
selection_background #364a82

# Cursor colors
cursor #c0caf5
cursor_text_color #1a1b26

# Normal colors
color0 #15161e
color1 #f7768e
color2 #9ece6a
color3 #e0af68
color4 #7aa2f7
color5 #bb9af7
color6 #7dcfff
color7 #a9b1d6

# Bright colors
color8 #414868
color9 #f7768e
color10 #9ece6a
color11 #e0af68
color12 #7aa2f7
color13 #bb9af7
color14 #7dcfff
color15 #c0caf5

# Extended colors for better theming
color16 #ff9e64
color17 #db4b4b

# Tab colors with transparency effect
active_tab_foreground   #1a1b26
active_tab_background   #7aa2f7
active_tab_font_style   bold
inactive_tab_foreground #565f89
inactive_tab_background #1f2335
inactive_tab_font_style normal
tab_bar_background      #16161e

# Window border colors
active_border_color     #7aa2f7
inactive_border_color   #414868
bell_border_color       #f7768e

# Mark colors (for search highlighting)
mark1_foreground #1a1b26
mark1_background #7aa2f7
mark2_foreground #1a1b26
mark2_background #9ece6a
mark3_foreground #1a1b26
mark3_background #e0af68

# Performance tuning
repaint_delay 8
input_delay 2
sync_to_monitor yes
wayland_titlebar_color #1a1b26

# Advanced features
shell /usr/bin/zsh
editor .
close_on_child_death no
allow_remote_control yes
update_check_interval 24
startup_session none
clipboard_control write-clipboard write-primary read-clipboard-ask read-primary-ask

# Key mappings - Enhanced shortcuts
# Font size
map ctrl+shift+equal increase_font_size
map ctrl+shift+plus increase_font_size
map ctrl+shift+minus decrease_font_size
map ctrl+shift+kp_subtract decrease_font_size
map ctrl+shift+backspace restore_font_size

# Clipboard
map ctrl+shift+c copy_to_clipboard
map ctrl+shift+v paste_from_clipboard
map shift+insert paste_from_selection

# Tab management
map ctrl+shift+t new_tab
map ctrl+shift+q close_tab
map ctrl+shift+w close_window
map ctrl+shift+right next_tab
map ctrl+shift+left previous_tab
map ctrl+shift+alt+t set_tab_title
map ctrl+shift+l next_layout
map ctrl+shift+. move_tab_forward
map ctrl+shift+, move_tab_backward

# Window management  
map ctrl+shift+enter new_window
map ctrl+shift+n new_os_window
map ctrl+shift+f toggle_fullscreen
map ctrl+shift+u kitten unicode_input
map ctrl+shift+f5 load_config_file
map ctrl+shift+f6 debug_config

# Scrolling
map ctrl+shift+up scroll_line_up
map ctrl+shift+down scroll_line_down  
map ctrl+shift+page_up scroll_page_up
map ctrl+shift+page_down scroll_page_down
map ctrl+shift+home scroll_home
map ctrl+shift+end scroll_end

# Zoom/Search
map ctrl+shift+equal change_font_size all +2.0
map ctrl+shift+minus change_font_size all -2.0
map ctrl+shift+f show_scrollback
map ctrl+shift+h show_last_command_output

# Transparency controls
map ctrl+shift+a>m set_background_opacity +0.1
map ctrl+shift+a>l set_background_opacity -0.1
map ctrl+shift+a>1 set_background_opacity 1
map ctrl+shift+a>d set_background_opacity default

# Layout and splits
enabled_layouts tall:bias=50;full_size=1;mirrored=false,fat:bias=50;full_size=1;mirrored=false,grid,horizontal,vertical,stack
map f1 create_marker
map f2 remove_marker

# tmux
map ctrl+shift+space launch --type=os-window --cwd=current ~/.config/kitty/split.sh

# Mouse mappings
mouse_map left click ungrabbed mouse_selection normal
mouse_map ctrl+left click grabbed,ungrabbed mouse_selection normal  
mouse_map ctrl+left press grabbed discard_event
mouse_map middle release ungrabbed paste_from_selection
mouse_map left press ungrabbed mouse_selection normal
mouse_map ctrl+alt+left press ungrabbed mouse_selection rectangle
mouse_map left doubleclick ungrabbed mouse_selection word
env TERM=xterm-kitty
env COLORTERM=truecolor

# Bell customization
command_on_bell none
bell_on_tab "ðŸ”” "

# URL handling
detect_urls yes
show_hyperlink_targets yes

# Advanced window management
resize_debounce_time 0.1
resize_in_steps no

# Kitty shell integration
shell_integration enabled
term xterm-kitty
